validator=============易于使用的golang校验器- 使用结构体tag定义校验规则- 可自定义校验器和校验错误信息快速开始-------------#### 安装下载安装:```shellgo get -u github.com/shaopson/validator```导入```goimport "github.com/shaopson/validator"```#### 使用先定义一个结构体，然后在结构体标签上添加校验规则```gotype UserForm struct {    Username  string `validate:"required,username,len:6-18"`    Email     string `validate:"email,blank"`    Password  string `validate:"password,len:8-20,required"`    Password2 string `validate:"eq_field:Password"`}```下一步创建实例，校验```gouser := UserForm{	Username:  "jack",	Email:     "jack@gmail.com",	Password:  "12345",	Password2: "6789",}v := validator.New()err := v.Validate(user)if err != nil {	if validationError,ok := err.(*validator.ValidationError); ok {		fmt.Println(validationError)	} else {		panic(err)	}}```#### 完整例子```gopackage mainimport (    "fmt"    "github.com/shaopson/validator")type UserForm struct {    Username  string `validate:"required,username,len:6-18"`    Email     string `validate:"email,blank"`    Password  string `validate:"password,len:8-20,required"`    Password2 string `validate:"eq_field:Password"`}func main() {    user := UserForm{        Username:  "jack",        Email:     "jack@gmail.com",        Password:  "12345",        Password2: "6789",    }    v := validator.New()    if err := v.Validate(user); err != nil {        if validationError, ok := err.(*validator.ValidationError); ok {            // validation failure            fmt.Println(validationError)        } else {            // other error            fmt.Println(err)        }    }}```我们在结构体字段的标签上使用*validate*关键词添加校验规则，这些校验规则也称为校验器。  在Username字段上添加了required，username，len 3个校验器， 其中required，username是无参数的，len是有参数的，使用`:`符号指定参数。需要注意的是只有在可导出字段上添加校验规则才有效，非导出字段会被跳过。当校验失败时，函数将会返回`*validator.ValidationError`错误，如果返回其他错误类型，可能是使用了错误的校验规则，检查你的代码。```goerr := v.Validate(form)validationError, ok := err.(*validator.ValidationError)```### 校验器列表| 校验器     | 参数         | 说明                                                                         ||-----------|------------|----------------------------------------------------------------------------|| blank     |            | 忽略零值                                                                       || required  |            | 必填字段                                                                       || len       | 数值或范围      | 长度是否等于或在范围内                                                                || eq        | value      | 是否等于指定值                                                                    || gt        | value      | 是否大于指定值                                                                    || gte       | value      | 是否大于等于指定值                                                                  || lt        | value      | 是否小于指定值                                                                    || lte       | value      | 是否小于等于指定值                                                                  || phone     |            | 是否是有效的手机号格式                                                                || email     |            | 是否是有效的电子邮箱格式                                                               || username  |            | 用户名校验，只能包含英文字母，数字和`@`/`.`/`-`符号                                            || password  | 1, 2, 3 或空 | 密码强度校验<br/> 1: 必须包含数字和字母<br/> 2: 必须包含大小写字母和数字 <br/> 3/空: 必须包含大小写字母，数字和英文符号 || ip        | v4, v6 或空  | v4: 是否是ipv4地址<br/> v6: 是否是ipv6地址<br/>空: 是否是ipv4或ipv6地址                     || number    |            | 是否是数值                                                                      || alpha     |            | 是否是英文字母                                                                    || lower     |            | 是否是小写字母                                                                    |                             | upper     |            | 是否是大写字母                                                                    || prefix    | value      | 是否包含指定前缀                                                                   || suffix    | value      | 是否包含指定后缀                                                                   || eq_field  | field name | 夸字段检查是否等于指定字段的值                                                            |                                             || gt_field  | field name | 夸字段检查是否大于指定字段的值                                                            |                                             || gte_field | field name | 夸字段检查是否大于等于指定字段的值                                                          |                                             || lt_field  | field name | 夸字段检查是否小于指定字段的值                                                            |                                             || lte_field | field name | 夸字段检查是否小于等于指定字段的值                                                          |                                             |### 自定义校验器```gopackage mainimport (    "fmt"    "github.com/shaopson/validator")import "strings"type Form struct {    Img string `validate:"img"`}func main() {    v := validator.New()    v.RegisterValidator("img", imgValidator)    form := Form{        Img: "xxx.img",    }    err := v.Validate(form)    fmt.Println(err)}// custom image file validatorfunc imgValidator(v *validator.Validation) error {    value := v.Field.String()    if strings.HasSuffix(value, ".png") {        return nil    } else if strings.HasSuffix(value, ".jpg") {        return nil    } else if strings.HasSuffix(value, ".gif") {        return nil    }    //Can only use methods Error and Errorf to return ValidationError error    return v.Errorf("'%s' must be image file", v.StructField.Name)}```### 自定义错误信息```gopackage mainimport "github.com/shaopson/validator"func main() {    v := validator.New()    v.RegisterFeedbackHandler("img", imgFeedback)}func imgFeedback(v *validator.Feedback) string {    return "only supports png, jpg, and gif image file"}```#### 快捷方式在结构体标签使用`feedback`关键词可以很方便的定义校验错误信息，但这会屏蔽具体校验器的返回信息```gotype Form struct {	Field string `validate:"len:2-40" feedback:"invalid value"`}```### 自定义标签关键词`SetTagName` 方法可以修改校验器标签关键词，默认值为`valudate``SetFeedbackTagName`方法可以修改错误信息标签关键词，默认值为`feedback`### 中文错误信息导入`github.com/shaopson/validator/feedback/hans`可以覆盖默认的英文校验错误返回信息```goimport "github.com/shaopson/validator"import _ "github.com/shaopson/validator/feedback/hans"```